2021/02/23 11:58:52 [debug] 83#0: [lua] globalpatches.lua:10: installing the globalpatches
2021/02/23 11:58:52 [debug] 83#0: [lua] globalpatches.lua:246: randomseed(): seeding PRNG from OpenSSL RAND_bytes()
2021/02/23 11:58:52 [debug] 83#0: [lua] globalpatches.lua:272: randomseed(): random seed: 143325320013 for worker nb 0
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:449: init(): [dns-client] (re)configuring dns client
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:454: init(): [dns-client] staleTtl = 4
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:457: init(): [dns-client] validTtl = nil
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:461: init(): [dns-client] noSynchronisation = false
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:480: init(): [dns-client] query order = LAST, SRV, A, CNAME
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:520: init(): [dns-client] adding A-record from 'hosts' file: localhost = 127.0.0.1
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:579: init(): [dns-client] nameserver 127.0.0.11:53
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:584: init(): [dns-client] attempts = 5
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:593: init(): [dns-client] timeout = 2000 ms
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:597: init(): [dns-client] ndots = 0
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:599: init(): [dns-client] search = 
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:605: init(): [dns-client] badTtl = 1 s
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:607: init(): [dns-client] emptyTtl = 30 s
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:449: init(): [dns-client] (re)configuring dns client
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:454: init(): [dns-client] staleTtl = 4
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:457: init(): [dns-client] validTtl = nil
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:461: init(): [dns-client] noSynchronisation = true
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:480: init(): [dns-client] query order = LAST, SRV, A, CNAME
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:520: init(): [dns-client] adding A-record from 'hosts' file: localhost = 127.0.0.1
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:579: init(): [dns-client] nameserver 127.0.0.11:53
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:584: init(): [dns-client] attempts = 5
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:593: init(): [dns-client] timeout = 2000 ms
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:597: init(): [dns-client] ndots = 0
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:599: init(): [dns-client] search = 
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:605: init(): [dns-client] badTtl = 1 s
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:607: init(): [dns-client] emptyTtl = 30 s
2021/02/23 11:58:52 [debug] 83#0: [lua] cluster.lua:556: refresh(): [lua-cassandra] refresh: attempting to acquire lock... (ver_refresh=0, timeout=30)
2021/02/23 11:58:52 [debug] 83#0: [lua] cluster.lua:572: refresh(): [lua-cassandra] refresh: lock acquired, fetching topology... (ver_refresh=1)
2021/02/23 11:58:52 [warn] 83#0: [lua] cluster.lua:597: refresh(): [lua-cassandra] found contact point with '0.0.0.0' as rpc_address, using '172.18.0.3' to contact it instead. If this is incorrect you should avoid using '0.0.0.0' in rpc_address
2021/02/23 11:58:52 [debug] 83#0: [lua] cluster.lua:613: refresh(): [lua-cassandra] refresh: cluster topology fetched (ver_refresh=1, n_peers=1)
2021/02/23 11:58:52 [debug] 83#0: [lua] cluster.lua:657: refresh(): [lua-cassandra] refresh: changes detected in topology: yes (ver_refresh=1)
2021/02/23 11:58:52 [debug] 83#0: [lua] cluster.lua:711: refresh(): [lua-cassandra] refresh: cluster topology refreshed: yes (ver_refresh=1, ver_topo=1)
2021/02/23 11:58:52 [debug] 83#0: [lua] cluster.lua:476: next_coordinator(): [lua-cassandra] load balancing policy chose host at 172.18.0.3
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:125: check_db_against_config(): Discovering used plugins
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:449: init(): [dns-client] (re)configuring dns client
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:454: init(): [dns-client] staleTtl = 4
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:457: init(): [dns-client] validTtl = nil
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:461: init(): [dns-client] noSynchronisation = false
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:480: init(): [dns-client] query order = LAST, SRV, A, CNAME
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:520: init(): [dns-client] adding A-record from 'hosts' file: localhost = 127.0.0.1
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:579: init(): [dns-client] nameserver 127.0.0.11:53
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:584: init(): [dns-client] attempts = 5
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:593: init(): [dns-client] timeout = 2000 ms
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:597: init(): [dns-client] ndots = 0
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:599: init(): [dns-client] search = 
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:605: init(): [dns-client] badTtl = 1 s
2021/02/23 11:58:52 [debug] 83#0: [lua] client.lua:607: init(): [dns-client] emptyTtl = 30 s
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: grpc-web
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: correlation-id
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: pre-function
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: cors
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: rate-limiting
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'rate-limiting.ratelimiting_metrics'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: loggly
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: hmac-auth
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'hmac-auth.hmacauth_credentials'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: zipkin
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: request-size-limiting
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: azure-functions
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: request-transformer
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: oauth2
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'oauth2.oauth2_credentials'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'oauth2.oauth2_authorization_codes'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'oauth2.oauth2_tokens'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: response-transformer
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: ip-restriction
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: statsd
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: jwt
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'jwt.jwt_secrets'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: proxy-cache
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: basic-auth
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'basic-auth.basicauth_credentials'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: key-auth
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'key-auth.keyauth_credentials'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: http-log
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: database-upstream
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: session
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'session.sessions'
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: datadog
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: tcp-log
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: prometheus
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: post-function
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: ldap-auth
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: acl
2021/02/23 11:58:52 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'acl.acls'
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: grpc-gateway
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: file-log
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: syslog
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: udp-log
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: response-ratelimiting
2021/02/23 11:58:53 [debug] 83#0: [kong] iam-ecs-credentials.lua:31 No ECS environment variables found for IAM
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: aws-lambda
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: bot-detection
2021/02/23 11:58:53 [info] 83#0: [lua] openssl.lua:5: using ffi, OpenSSL version linked: 1010108f
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: acme
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:225: loader_fn(): Loading custom plugin entity: 'acme.acme_storage'
2021/02/23 11:58:53 [debug] 83#0: [lua] plugins.lua:267: load_plugin(): Loading plugin: request-termination
2021/02/23 11:58:53 [notice] 83#0: using the "epoll" event method
2021/02/23 11:58:53 [notice] 83#0: openresty/1.17.8.2
2021/02/23 11:58:53 [notice] 83#0: built by gcc 9.3.0 (Alpine 9.3.0) 
2021/02/23 11:58:53 [notice] 83#0: OS: Linux 4.19.121-linuxkit
2021/02/23 11:58:53 [notice] 83#0: getrlimit(RLIMIT_NOFILE): 1048576:1048576
2021/02/23 11:58:53 [notice] 88#0: start worker processes
2021/02/23 11:58:53 [notice] 88#0: start worker process 89
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] globalpatches.lua:246: randomseed(): seeding PRNG from OpenSSL RAND_bytes()
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] globalpatches.lua:272: randomseed(): random seed: 772104185242 for worker nb 0
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] events.lua:211: do_event_json(): worker-events: handling event; source=resty-worker-events, event=started, pid=89, data=nil
2021/02/23 11:58:53 [warn] 89#0: *1 [lua] socket.lua:159: tcp(): no support for cosockets in this context, falling back to LuaSocket, context: init_worker_by_lua*
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] cluster.lua:476: next_coordinator(): [lua-cassandra] load balancing policy chose host at 172.18.0.3
2021/02/23 11:58:53 [notice] 89#0: *1 [lua] cache_warmup.lua:50: cache_warmup_single_entity(): Preloading 'services' into the core_cache..., context: init_worker_by_lua*
2021/02/23 11:58:53 [warn] 89#0: *1 [lua] socket.lua:159: tcp(): no support for cosockets in this context, falling back to LuaSocket, context: init_worker_by_lua*
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] cluster.lua:476: next_coordinator(): [lua-cassandra] load balancing policy chose host at 172.18.0.3
2021/02/23 11:58:53 [notice] 89#0: *1 [lua] cache_warmup.lua:89: cache_warmup_single_entity(): finished preloading 'services' into the core_cache (in 71ms), context: init_worker_by_lua*
2021/02/23 11:58:53 [notice] 89#0: *1 [lua] cache_warmup.lua:50: cache_warmup_single_entity(): Preloading 'plugins' into the core_cache..., context: init_worker_by_lua*
2021/02/23 11:58:53 [warn] 89#0: *1 [lua] socket.lua:159: tcp(): no support for cosockets in this context, falling back to LuaSocket, context: init_worker_by_lua*
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] cluster.lua:476: next_coordinator(): [lua-cassandra] load balancing policy chose host at 172.18.0.3
2021/02/23 11:58:53 [notice] 89#0: *1 [lua] cache_warmup.lua:89: cache_warmup_single_entity(): finished preloading 'plugins' into the core_cache (in 6ms), context: init_worker_by_lua*
2021/02/23 11:58:53 [info] 89#0: *1 [kong] handler.lua:56 [acme] acme renew timer started on worker 0, context: init_worker_by_lua*
2021/02/23 11:58:53 [debug] 89#0: *1 [kong] handler.lua:33 [database-upstream] saying hi from the 'init_worker' handler
2021/02/23 11:58:53 [debug] 89#0: *1 [lua] counter.lua:70: new(): start timer for shdict prometheus_metrics on worker 0
2021/02/23 11:58:53 [debug] 89#0: *2 [lua] cluster.lua:476: next_coordinator(): [lua-cassandra] load balancing policy chose host at 172.18.0.3
2021/02/23 11:58:53 [notice] 89#0: *4 +------------------------------------------------------------------------------------------------------------------------+, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |[kong] handler.lua:?:69 {                                                                                               |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |  __key__ = "plugins:database-upstream:d3d760e3-c98f-4a04-8ee0-4c839a5466df::::680d5a04-1891-49cb-b856-334b64bf90d3",   |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |  __seq__ = 0,                                                                                                          |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |  request_header = "Hello-World",                                                                                       |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |  response_header = "Bye-World",                                                                                        |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |  route_id = "d3d760e3-c98f-4a04-8ee0-4c839a5466df",                                                                    |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |  ttl = 600                                                                                                             |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 |}                                                                                                                       |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *4 +------------------------------------------------------------------------------------------------------------------------+, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [debug] 89#0: *4 [lua] init.lua:969: balancer(): setting address (try 1): 127.0.0.1:15555
2021/02/23 11:58:53 [debug] 89#0: *4 [lua] init.lua:998: balancer(): enabled connection keepalive (pool=127.0.0.1|15555, pool_size=60, idle_timeout=60, max_requests=100)
2021/02/23 11:58:53 [debug] 89#0: *2 [lua] cluster.lua:476: next_coordinator(): [lua-cassandra] load balancing policy chose host at 172.18.0.3
2021/02/23 11:58:53 [debug] 89#0: *2 [lua] balancer.lua:766: create_balancers(): initialized 0 balancer(s), 0 error(s)
2021/02/23 11:58:53 [debug] 89#0: *2 [lua] balancer.lua:788: set_worker_state_updated(): proxy state is updated
2021/02/23 11:58:53 [info] 89#0: *4 client 127.0.0.1 closed keepalive connection
2021/02/23 11:58:53 [notice] 89#0: *7 +------------------------------------------------------------------------------------------------------------------------+, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |[kong] handler.lua:?:69 {                                                                                               |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |  __key__ = "plugins:database-upstream:d3d760e3-c98f-4a04-8ee0-4c839a5466df::::680d5a04-1891-49cb-b856-334b64bf90d3",   |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |  __seq__ = 0,                                                                                                          |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |  request_header = "Hello-World",                                                                                       |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |  response_header = "Bye-World",                                                                                        |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |  route_id = "d3d760e3-c98f-4a04-8ee0-4c839a5466df",                                                                    |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |  ttl = 600                                                                                                             |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 |}                                                                                                                       |, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [notice] 89#0: *7 +------------------------------------------------------------------------------------------------------------------------+, client: 127.0.0.1, server: kong, request: "GET /request HTTP/1.1", host: "test1.com"
2021/02/23 11:58:53 [debug] 89#0: *7 [lua] init.lua:969: balancer(): setting address (try 1): 127.0.0.1:15555
2021/02/23 11:58:53 [debug] 89#0: *7 [lua] init.lua:998: balancer(): enabled connection keepalive (pool=127.0.0.1|15555, pool_size=60, idle_timeout=60, max_requests=100)
2021/02/23 11:58:53 [info] 89#0: *7 client 127.0.0.1 closed keepalive connection
2021/02/23 11:58:53 [notice] 88#0: signal 15 (SIGTERM) received from 90, exiting
2021/02/23 11:58:53 [notice] 89#0: exiting
